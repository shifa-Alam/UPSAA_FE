<div class="election-dashboard">

    <h2 class="page-title">Election Results Dashboard</h2>

    <!-- Top Summary Cards -->
    <div class="summary-cards">
        <div class="card total-votes">
            <h3>Total Votes Cast</h3>
            <p>{{ totalVotes }}</p>
        </div>

        <div class="card total-candidates">
            <h3>Total Candidates</h3>
            <p>{{ candidates.length }}</p>
        </div>

        <div class="card leading-candidate">
            <h3>Leading Candidate</h3>
            <p>{{ leadingCandidate?.memberName }}</p>
            <p><strong>{{ leadingCandidate?.votes }}</strong> votes</p>
            <!-- <div class="progress-bar">
                <div class="progress" [style.width.%]="(leadingCandidate?.votes / totalVotes * 100) || 0"></div>
            </div> -->
        </div>

        <div class="card positions-count">
            <h3>Total Positions</h3>
            <p>{{ positions.length }}</p>
        </div>
    </div>

    <!-- Position-wise Top Candidates -->
    <div class="position-summary">
        <h3>Top Candidate by Position</h3>
        <div class="position-cards">
            <div class="position-card" *ngFor="let pos of positions">
                <h4>{{ pos.positionName }}</h4>
                <p>{{ pos.topCandidate.memberName }} ({{ pos.topCandidate.votes }} votes)</p>
                <div class="progress-bar">
                    <div class="progress" [style.width.%]="(pos.topCandidate.votes / totalVotes * 100) || 0"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detailed Results Table -->
    <div class="table-wrapper">
        <table class="results-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Candidate</th>
                    <th>Position</th>
                    <th>Votes</th>
                    <th>% of Total</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let candidate of candidates; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ candidate.memberName }}</td>
                    <td>{{ candidate.positionName }}</td>
                    <td>{{ candidate.votes }}</td>
                    <td>
                        {{ (candidate.votes / totalVotes * 100) | number:'1.0-2' }}%
                        <div class="progress-bar small">
                            <div class="progress" [style.width.%]="(candidate.votes / totalVotes * 100) || 0"></div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Chart -->
    <div class="charts">
        <h3>Votes Distribution</h3>
        <canvas id="voteChart"></canvas>
    </div>

</div>