<div class="register-container">
    <mat-card class="register-card">

        <!-- <h2 class="dashboard-title">Alumni Members Overview</h2> -->

        <!-- Summary Cards -->
        <div class="dashboard-summary">
            <div class="summary-card total-members">
                <div class="icon">üë•</div>
                <div class="content">
                    <h3>Total Members</h3>
                    <p>{{ totalItems }}</p>
                </div>
            </div>

            <div class="summary-card membership-amount">
                <div class="icon">üí≥</div>
                <div class="content">
                    <h3>Membership</h3>
                    <p>{{ totalMembershipAmount | currency:'BDT':'symbol':'1.0-0' }}</p>
                </div>
            </div>

            <div class="summary-card donation-amount">
                <div class="icon">üéÅ</div>
                <div class="content">
                    <h3>Donations</h3>
                    <p>{{ totalDonationAmount | currency:'BDT':'symbol':'1.0-0' }}</p>
                </div>
            </div>

            <div class="summary-card total-amount">
                <div class="icon">üí∞</div>
                <div class="content">
                    <h3>Total Amount</h3>
                    <p>{{ totalAmount | currency:'BDT':'symbol':'1.0-0' }}</p>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filters-container">
            <div class="filter-item">
                <input type="text" placeholder="Search Name" [(ngModel)]="filter.fullName"
                    (ngModelChange)="applyFilter()" />
            </div>
            <div class="filter-item">
                <input type="text" placeholder="Phone Or Email" [(ngModel)]="filter.phoneOrEmail"
                    (ngModelChange)="applyFilter()" />
            </div>
            
            <div class="filter-item">
                <input type="number" placeholder="Batch" [(ngModel)]="filter.batch" (ngModelChange)="applyFilter()" />
            </div>
            <div class="filter-item">
                <input type="text" placeholder="City" [(ngModel)]="filter.currentCity"
                    (ngModelChange)="applyFilter()" />
            </div>
            <div class="filter-item gender">
                <select [(ngModel)]="filter.gender" (ngModelChange)="applyFilter()">
                    <option [ngValue]="null" selected>All Genders</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>
            </div>
            <div class="filter-item blood-group">
                <select [(ngModel)]="filter.bloodGroup" (ngModelChange)="applyFilter()">
                    <option value="" selected>All Blood Groups</option>
                    <option *ngFor="let bg of bloodGroups" [value]="bg">{{ bg }}</option>
                </select>
            </div>
            <div class="filter-item reset-button">
                <button type="button" (click)="resetFilters()">Reset Filters</button>
            </div>
        </div>

        <!-- Loader Overlay -->
        <div class="loader-overlay" *ngIf="loading">
            <mat-progress-spinner color="primary" mode="indeterminate" diameter="60"></mat-progress-spinner>
        </div>

        <!-- Members Table -->
        <div class="table-container">
            <table class="members-table">
                <thead>
                    <tr>
                        <th class="col-batch">Batch</th>
                        <th class="col-name">Name</th>
                        <th class="col-phone">Phone</th>
                        <th class="col-city">City</th>
                        <th class="col-blood">Blood</th>
                        <th class="col-total">Total</th>
                        <th class="col-action">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let member of members" class="member-row">
                        <td class="col-batch">{{ member.batch }}</td>
                        <td class="col-name">{{ member.fullName }}</td>
                        <td class="col-phone">{{ member.phone }}</td>
                        <td class="col-city">{{ member.currentCity }}</td>
                        <td class="col-blood">{{ member.bloodGroup }}</td>
                        <td class="col-total">{{ member.fees | memberFeeAmount:'Total' }}</td>
                        <td class="col-action">
                            <button class="details-btn" (click)="viewMemberDetails(member)">Details</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <nav class="pagination-container" *ngIf="totalPages > 1">
            <ul class="pagination">

                <!-- Previous -->
                <li [class.disabled]="pageNumber === 1">
                    <button (click)="onPageChange(pageNumber - 1)">‚Äπ Previous</button>
                </li>

                <!-- First page -->
                <li [class.active]="pageNumber === 1">
                    <button (click)="onPageChange(1)">1</button>
                </li>

                <!-- Ellipsis before middle pages -->
                <li *ngIf="pageNumber > 3"><span>...</span></li>

                <!-- Middle pages -->
                <li *ngFor="let p of getMiddlePages()" [class.active]="pageNumber === p">
                    <button (click)="onPageChange(p)">{{ p }}</button>
                </li>

                <!-- Ellipsis after middle pages -->
                <li *ngIf="pageNumber < totalPages - 2"><span>...</span></li>

                <!-- Last page -->
                <li [class.active]="pageNumber === totalPages">
                    <button (click)="onPageChange(totalPages)">{{ totalPages }}</button>
                </li>

                <!-- Next -->
                <li [class.disabled]="pageNumber === totalPages">
                    <button (click)="onPageChange(pageNumber + 1)">Next ‚Ä∫</button>
                </li>

            </ul>
        </nav>


    </mat-card>
</div>