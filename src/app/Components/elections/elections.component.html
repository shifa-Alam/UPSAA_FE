<div>
  <h2 class="page-title">UPSAA Elections</h2>

  <!-- Header -->
  <div class="header">
    <input type="text" placeholder="Search elections" [(ngModel)]="searchTerm" />

    <button class="add-btn" (click)="openAddElectionModal()">
      + Add
    </button>
  </div>
  <div *ngIf="loading" class="loading-wrapper">
    <div class="spinner"></div>
    <p>Loading elections...</p>
  </div>
  <div *ngIf="!loading">
  <!-- Desktop Table -->
  <div class="table-wrapper desktop-only">
    <table class="elections-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th style="width: 180px;">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let election of pagedElections; let i = index">
          <td>{{ i + 1 + (currentPage - 1) * pageSize }}</td>
          <td>{{ election.title }}</td>
          <td>{{ election.startTime }}</td>
          <td>{{ election.endTime }}</td>
          <td>
            <button class="details-btn" (click)="viewDetails(election)" title="Details">Details</button>
            <button class="edit-btn" (click)="editElection(election)">Edit</button>
            <button class="delete-btn" (click)="deleteElection(election)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Mobile Cards -->
  <div class="mobile-only">
    <div class="election-card" *ngFor="let election of pagedElections; let i = index">

      <div class="card-header">
        <span class="index">#{{ i + 1 }}</span>
        <span class="title">{{ election.title }}</span>

      </div>
      <div class="card-dates">
        <span>Start: {{ election.startTime | date:'shortDate' }}</span>
        <span>End: {{ election.endTime | date:'shortDate' }}</span>
      </div>
      <div class="card-actions">
        <button class="details-btn" (click)="viewDetails(election)" title="Details">Details</button>
        <button class="edit-btn" (click)="editElection(election)">Edit</button>
        <button class="delete-btn" (click)="deleteElection(election)">Delete</button>
      </div>
    </div>
  </div>
  </div>


  <!-- Pagination -->
  <div class="pagination">
    <button [disabled]="currentPage === 1" (click)="prevPage()">Prev</button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button [disabled]="currentPage === totalPages" (click)="nextPage()">Next</button>
  </div>

  <!-- Modal -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <h2>{{ editMode ? 'Edit' : 'Add' }} Election</h2>

      <form (ngSubmit)="submitElection()">
        <label>Election Title</label>
        <input type="text" [(ngModel)]="modalElection.title" name="title" required />

        <label>Start Date</label>
        <input type="date" [(ngModel)]="modalElection.startTime" name="startTime" required />

        <label>End Date</label>
        <input type="date" [(ngModel)]="modalElection.endTime" name="endTime" required />

        <div class="modal-actions">
          <button type="submit" class="save-btn">
            {{ editMode ? 'Update' : 'Create' }}
          </button>
          <button type="button" class="cancel-btn" (click)="closeModal()">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>

</div>